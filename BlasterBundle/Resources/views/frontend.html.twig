{% extends "DJBlasterBundle::djblaster_base.html.twig" %}

{% block navbar %}
    <li class="active">
        <a href="{{ path('dj_blaster_frontend') }}">Home</a>
    </li>
{% endblock %}

{% block navbaruser %}
    <li>
        <a href="{{ path('dj_blaster_admin_login') }}">Login</a>
    </li>
{% endblock %}

{% block content %}
{% verbatim %}
<div ng-app="djblasterApp">
    <div class='panel panel-primary' 
         ng-controller="adShowSponsorshipCtrl">
        <div class="panel-heading">
            <div class="panel-title">Show Sponsorships</div>
        </div>
        <div class="panel-body">
        <div class="row"
            ng-hide="show_sponsorships">
            <div class="center-block text-center" style="width:100px;">
                <img src='/images/loading.gif'/><br/>Loading...
            </div>
        </div>
        <ul class="list-group"
            style="margin-bottom: 0px;"
            ng-repeat="sponsorship in show_sponsorships track by $index" 
            ng-show="show_sponsorships"
            >
            <li class="list-group-item" 
                id="{{'ad-show-sponsorship-'+sponsorship.sponsorship_id}}">
                <a href="#readItModal" 
                    class='btn btn-danger btn-xs pull-right'
                    ng-click="readitClicked('read-it-button-spons-'+sponsorship.sponsorship_id)"
                    id="{{'read-it-button-spons-'+sponsorship.sponsorship_id}}"
                    data-toggle="modal"
                    data-ad_type="show-sponsorship"
                    data-ad_id="{{sponsorship.sponsorship_id}}">Confirm Read</a>
                <b>{{sponsorship.ad_name}}</b><br/>
                <span ng-bind-html="sponsorship.ad_content | unsaftenHTML"></span>
                
            </li>
        </ul> 
        </div>
    </div>
    <div class='panel panel-info' 
         ng-controller="adEventCtrl">
         <div class="panel-heading">
            <h3 class="panel-title">Event</h3>
        </div>
        <div class="panel-body">
        <div class="row"
            ng-hide="events">
            <div class="center-block text-center" style="width:100px;">
                <img src='/images/loading.gif'/><br/>Loading...
            </div>
        </div>
        <ul class="list-group"
            style="margin-bottom: 0px;"
            ng-repeat="event in events track by $index" 
            ng-show="events">
            <li class="list-group-item"
                id="{{'ad-event-'+event.event_id}}">
                <a href="#readItModal" 
                    class='btn btn-danger btn-xs pull-right'
                    ng-click="readitClicked('read-it-button-event-'+event.event_id)"
                    id="{{'read-it-button-event-'+event.event_id}}"
                    data-toggle="modal"
                    data-ad_type="event"
                    data-ad_id="{{event.event_id}}">Confirm Read</a>
                <b>{{event.ad_name}}</b><br/>
                <span>{{event.ad_content}}</span>
                
            </li>
        </ul> 
        </div>
    </div>
    
    <div class='panel panel-warning' 
         ng-controller="adPSACtrl">
        <div class="panel-heading">
            <h3 class="panel-title">PSA</h3>
        </div>
        <div class="panel-body">
        <div class="row"
            ng-hide="psas">
            <div class="center-block text-center" style="width:100px;">
                <img src='/images/loading.gif'/><br/>Loading...
            </div>
        </div>
        <ul class="list-group"
            style="margin-bottom: 0px;"
            ng-repeat="psa in psas track by $index" 
            ng-show="psas">
            <li class="list-group-item"
                id="{{'ad-psa-'+psa.psa_id}}">
                <a href="#readItModal" 
                    class='btn btn-danger btn-xs pull-right'
                    ng-click="readitClicked('read-it-button-psa-'+psa.psa_id)"
                    id="{{'read-it-button-psa-'+psa.psa_id}}"
                    data-toggle="modal"
                    data-ad_type="psa"
                    data-ad_id="{{psa.psa_id}}">Confirm Read</a>
                <a href="javascript:void(0);" 
                    class='btn btn-info btn-xs pull-right'
                    style='margin-right:5px;'
                    ng-click="skipitClicked(psa.psa_id)"
                    id="{{'skip-it-button-psa-'+psa.psa_id}}"
                    >Skip It</a>
                <b>{{psa.ad_name}}</b><br/>
                <span>{{psa.ad_content}}</span>
                
            </li>
        </ul> 
        </div>
    </div>

{% endverbatim %}
    <div class='panel panel-danger' 
         ng-controller="debugCtrl"
         ng-show="debugActive"
         >
        <div class="panel-heading">
            <h3 class="panel-title">DEBUG AND TEST</h3>
        </div>
        <div class="panel-body">
            
            Date:
            <input id='debug-input-date'
                    type='text'
                    ng-value='currentDate' disabled>
            <button class='btn btn-primary btn-xs' ng-click='decrementDate()'>-</button>
            <button class='btn btn-primary btn-xs' ng-click='incrementDate()'>+</button>
            Hour:
            <input id='debug-input-hour'
                    type='text'
                    size='2'
                    ng-value='currentHour'disabled>
            <button class='btn btn-primary btn-xs' ng-click='decrementHour()'>-</button>
            <button class='btn btn-primary btn-xs' ng-click='incrementHour()'>+</button>
        </div>
    </div>
    <div class="modal fade" 
         id="readItModal"
         ng-controller="readitModalCtrl">
        <div class="modal-dialog" >
            <div class="modal-content" >
                <div class="modal-header">
                    <button type="button"
                            class="close"
                            data-dismiss="modal"
                            aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Confirm Read</h4>
                </div>
                <div class="modal-body">
                    <div class="form-horizontal">
                    <div class='form-group'
                         id='readitFormGroup'>
                        <label for="dj-initials" 
                               class="control-label col-sm-2">DJ Initials</label>
                        <div class="col-xs-2">
                        <input type="text" 
                               name="dj-initials" 
                               class="form-control input-min" 
                               id="inputDJInitials" >
                        </div>
                        <button class="btn btn-danger pull-right"
                                ng-click="submitClicked()"
                                id="readItSubmitButton"
                                style="margin-right:20px;">Submit</button>
                    </div>
                    
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block javascripts %}
{{ parent() }}
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
<script src="{{ asset('js/djblaster.js') }}"></script>
<script type='text/javascript'>
    var BASE_URL = "{{ url('dj_blaster_frontend') }}";
    BASE_URL = BASE_URL.substring(0, BASE_URL.length - 1);
</script>
{% endblock %}
